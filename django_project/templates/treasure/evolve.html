{% extends 'treasure/base.html' %}

{% load static %}
{% load render_help %}

{% block title %}
    Evolve
{% endblock %}

{% block body_block %}
    <div class="hero-unit">
        <h2>Evolve</h2>
        
        <ul class="nav nav-pills nav-justified">
            <li {% if error == "file" %}class="active"{% endif %}><a data-toggle="tab" href="#file" tabindex='1'>Evolve with a File</a></li>
            <li {% if error == "web" %}class="active"{% endif %}><a data-toggle="tab" href="#web" tabindex='1'>Evolve with a Link</a></li>
        </ul>

        <div class="tab-content">
        
            <div id="file" class="{% if error == "file" %}active{% endif %} tab-pane container">
                <h3>File Evolve</h3>
                <form class="span6" id="file_evolve" method="post" action="/treasure/resource/{{ resource_id }}/evolve/" enctype="multipart/form-data">
                	{% csrf_token %}
                
                    {% for hidden in resource_form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {% for field in resource_form.visible_fields %}
                        {{ field.errors }}
                        {{ field.label }}{% render_help_text field %}<br/>
                        {{ field }}<br/>
                    {% endfor %}
                    
                    {% for hidden in file_form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {% for field in file_form.visible_fields %}
                        {{ field.errors }}
                        {{ field.label }}{% render_help_text field %}<br/>
                        {{ field }}<br/>
                    {% endfor %}
                    <br/>
                    <button class="btn btn-primary" type="submit" name="file_evolve" tabindex='1'>Upload Resource</button>
                </form>
            </div>
            
            <div id="web" class="{% if error == "web" %}active{% endif %} tab-pane container">
                <h3>Web Evolve</h3>
                <form class="span6" id="web_evolve" method="post" action="/treasure/resource/{{ resource_id }}/evolve/" enctype="multipart/form-data">
                	{% csrf_token %}
                
                    {% for hidden in resource_form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {% for field in resource_form.visible_fields %}
                        {{ field.errors }}
                        {{ field.label }}{% render_help_text field %}<br/>
                        {{ field }}<br/>
                    {% endfor %}
                    
                    {% for hidden in web_form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {% for field in web_form.visible_fields %}
                        {{ field.errors }}
                        {{ field.label }}{% render_help_text field %}<br/>
                        {{ field }}<br/>
                    {% endfor %}
                    <br/>
                    <button class="btn btn-primary" type="submit" name="web_evolve" tabindex='1'>Upload Resource</button>
                </form>
            </div>
            
            <div class="{% if not error %}active{% endif %} tab-pane container">
                <ul><li><h3>Please select evolution type.</h3></li></ul>
            </div>

        </div>
        
    </div>
    
{% endblock %}
